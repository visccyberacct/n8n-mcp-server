# Workflow Field Reference

Complete reference for n8n workflow fields when using the `create_workflow` and `update_workflow` MCP tools.

**Last Updated**: 2026-01-13
**n8n API Version**: v1
**n8n Version Tested**: 1.114.3

---

## Quick Reference

| Status | Meaning |
|--------|---------|
| âœ… **REQUIRED** | Must be included in request, will fail without it |
| ðŸŸ¢ **OPTIONAL** | Can be included, provides additional functionality |
| âŒ **FORBIDDEN** | Must NOT be included, causes 400 error if present |
| ðŸ“– **READ-ONLY** | Returned by GET requests, forbidden in POST/PUT |

---

## Top-Level Workflow Fields

### âœ… REQUIRED Fields

These fields **must** be present in `create_workflow` requests:

| Field | Type | Description | Example |
|-------|------|-------------|---------|
| `name` | string | Workflow display name | `"My Workflow"` |
| `nodes` | array | List of workflow nodes | `[{...node...}]` |
| `connections` | object | Node connection definitions | `{"Node1": {...}}` |

### ðŸŸ¢ OPTIONAL Fields

These fields **may** be included:

| Field | Type | Description | Default | Example |
|-------|------|-------------|---------|---------|
| `settings` | object | Workflow execution settings | `{}` | `{"executionOrder": "v1"}` |
| `tags` | array | Tag IDs to assign | `[]` | `["tag_abc123"]` |

**Note on `settings`**: While technically optional, including an empty `{}` or `{"executionOrder": "v1"}` is recommended to avoid some validation errors.

### âŒ FORBIDDEN Fields

These fields **must NOT** be included in requests (they cause 400 errors):

| Field | Type | Why Forbidden | Workaround |
|-------|------|---------------|------------|
| `active` | boolean | Read-only, managed separately | Use `activate_workflow` tool |
| `description` | string | Not supported in v1 API | Omit or add to workflow name |
| `id` | string | Auto-generated by n8n | n8n assigns on creation |
| `versionId` | string | Auto-generated version ID | n8n manages versions |
| `activeVersionId` | string | Auto-generated | n8n tracks active version |
| `createdAt` | string | Timestamp, auto-generated | n8n sets on creation |
| `updatedAt` | string | Timestamp, auto-generated | n8n updates automatically |
| `staticData` | object | Internal n8n state | n8n manages internally |
| `meta` | object | Internal metadata | n8n manages internally |
| `pinData` | object | Pinned test data | n8n manages via UI |
| `triggerCount` | number | Execution statistics | n8n tracks automatically |
| `versionCounter` | number | Version tracking | n8n increments automatically |

---

## Node Fields

Each object in the `nodes` array represents a workflow node.

### âœ… REQUIRED Node Fields

| Field | Type | Description | Example |
|-------|------|-------------|---------|
| `id` | string | Unique node identifier within workflow | `"node_1"`, `"Start_Node"` |
| `name` | string | Display name for the node | `"HTTP Request"`, `"Transform Data"` |
| `type` | string | Node type identifier | `"n8n-nodes-base.httpRequest"` |
| `typeVersion` | number | Node type version | `1`, `2`, `3` |
| `position` | array | `[x, y]` coordinates for UI layout | `[250, 300]` |

### ðŸŸ¢ OPTIONAL Node Fields

| Field | Type | Description | Default | Example |
|-------|------|-------------|---------|---------|
| `parameters` | object | Node-specific configuration | `{}` | `{"url": "https://api.example.com"}` |
| `credentials` | object | Credential assignments | `{}` | `{"httpHeaderAuth": {"id": "cred_123"}}` |
| `disabled` | boolean | Whether node is disabled | `false` | `true` |
| `notes` | string | User notes for the node | `""` | `"Production API endpoint"` |
| `notesInFlow` | boolean | Show notes in flow | `false` | `true` |

**Important**: The `parameters` content is node-type-specific. Different node types expect different parameter structures.

### âŒ FORBIDDEN Node Fields

| Field | Why Forbidden |
|-------|---------------|
| `webhookId` | Auto-generated for trigger nodes |
| `alwaysOutputData` | Internal execution control |
| `executeOnce` | Internal execution control |
| `retryOnFail` | Use workflow-level settings |

---

## Connection Fields

The `connections` object defines data flow between nodes.

### Structure

```javascript
{
  "Source Node Name": {
    "connection_type": [
      [
        {
          "node": "Target Node Name",
          "type": "connection_type",
          "index": 0
        }
      ]
    ]
  }
}
```

### âœ… REQUIRED Connection Fields

| Field | Type | Description | Example |
|-------|------|-------------|---------|
| `node` | string | Target node name (must match a node's `name` field) | `"HTTP Request"` |
| `type` | string | Connection type | `"main"`, `"ai_languageModel"` |
| `index` | number | Output index (0 for single output) | `0`, `1` |

### Common Connection Types

| Type | Use Case | Example |
|------|----------|---------|
| `main` | Standard execution flow | Most node connections |
| `ai_languageModel` | LLM to AI Agent | Gemini â†’ AI Agent |
| `ai_tool` | Tool to AI Agent | HTTP Request â†’ AI Agent |
| `ai_memory` | Memory to AI Agent | Memory Buffer â†’ AI Agent |
| `ai_outputParser` | Parser to AI Agent | JSON Parser â†’ AI Agent |

See [CONNECTION_TYPES.md](CONNECTION_TYPES.md) for detailed connection documentation.

---

## Settings Field

The `settings` object configures workflow execution behavior.

### Common Settings

| Field | Type | Description | Default | Example |
|-------|------|-------------|---------|---------|
| `executionOrder` | string | Execution order strategy | `"v1"` | `"v1"` |
| `saveManualExecutions` | boolean | Save manual runs | `false` | `true` |
| `saveExecutionProgress` | boolean | Save progress during execution | `false` | `true` |
| `executionTimeout` | number | Max execution time (seconds) | `3600` | `1800` |
| `timezone` | string | Workflow timezone | `"America/New_York"` | `"Europe/London"` |

**Recommended**: Always include at minimum `{"executionOrder": "v1"}` to ensure predictable behavior.

---

## Complete Minimal Example

```json
{
  "name": "My Simple Workflow",
  "settings": {
    "executionOrder": "v1"
  },
  "nodes": [
    {
      "id": "start_node",
      "name": "Start",
      "type": "n8n-nodes-base.start",
      "typeVersion": 1,
      "position": [250, 300],
      "parameters": {}
    },
    {
      "id": "http_node",
      "name": "HTTP Request",
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 3,
      "position": [450, 300],
      "parameters": {
        "url": "https://api.example.com/data",
        "method": "GET"
      }
    }
  ],
  "connections": {
    "Start": {
      "main": [[{
        "node": "HTTP Request",
        "type": "main",
        "index": 0
      }]]
    }
  }
}
```

---

## Complete Maximum Example

```json
{
  "name": "Production Workflow",
  "settings": {
    "executionOrder": "v1",
    "saveManualExecutions": true,
    "saveExecutionProgress": true,
    "executionTimeout": 1800,
    "timezone": "America/New_York"
  },
  "tags": ["tag_production", "tag_api"],
  "nodes": [
    {
      "id": "trigger_webhook",
      "name": "Webhook Trigger",
      "type": "n8n-nodes-base.webhook",
      "typeVersion": 1,
      "position": [250, 300],
      "parameters": {
        "path": "my-webhook",
        "httpMethod": "POST",
        "responseMode": "onReceived"
      }
    },
    {
      "id": "api_request",
      "name": "API Call",
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 3,
      "position": [450, 300],
      "parameters": {
        "url": "https://api.example.com/process",
        "method": "POST",
        "sendBody": true,
        "bodyParameters": {
          "parameters": [
            {
              "name": "data",
              "value": "={{ $json.payload }}"
            }
          ]
        }
      },
      "credentials": {
        "httpHeaderAuth": {
          "id": "cred_abc123"
        }
      },
      "notes": "Calls production API with auth",
      "notesInFlow": true
    }
  ],
  "connections": {
    "Webhook Trigger": {
      "main": [[{
        "node": "API Call",
        "type": "main",
        "index": 0
      }]]
    }
  }
}
```

---

## Common Error Messages

### Error: "must NOT have additional properties"

**Cause**: You included a forbidden field (see âŒ FORBIDDEN list above)

**Solution**:
1. Remove all forbidden fields:
   - `active`, `description`, `id`, `versionId`
   - `createdAt`, `updatedAt`, `activeVersionId`
   - `staticData`, `meta`, `pinData`
   - `triggerCount`, `versionCounter`
2. Try again

### Error: "must have required property 'settings'"

**Cause**: Missing `settings` field (though technically optional, sometimes required by validation)

**Solution**: Add minimal settings:
```json
{
  "settings": {
    "executionOrder": "v1"
  }
}
```

### Error: "must have required property 'name'"

**Cause**: Missing required field

**Solution**: Ensure all âœ… REQUIRED fields are present:
- Top-level: `name`, `nodes`, `connections`
- Per-node: `id`, `name`, `type`, `typeVersion`, `position`

### Error: "nodes/0 must have required property 'position'"

**Cause**: Node missing required field

**Solution**: Each node must have `position` as `[x, y]` array:
```json
{
  "position": [250, 300]
}
```

---

## Field Removal Checklist

When converting a workflow from `get_workflow` output to `create_workflow` input, remove these fields:

```python
# Fields to remove from top-level workflow object
FORBIDDEN_WORKFLOW_FIELDS = {
    "id",
    "versionId",
    "activeVersionId",
    "createdAt",
    "updatedAt",
    "active",
    "description",  # Not supported in v1
    "staticData",
    "meta",
    "pinData",
    "triggerCount",
    "versionCounter"
}

# Fields to remove from each node
FORBIDDEN_NODE_FIELDS = {
    "webhookId",
    "alwaysOutputData",
    "executeOnce",
    "retryOnFail"  # Use workflow-level settings instead
}

# Clean workflow data
def clean_workflow_for_creation(workflow: dict) -> dict:
    """Remove forbidden fields from workflow data."""
    cleaned = {
        k: v for k, v in workflow.items()
        if k not in FORBIDDEN_WORKFLOW_FIELDS
    }

    # Clean each node
    if "nodes" in cleaned:
        cleaned["nodes"] = [
            {k: v for k, v in node.items() if k not in FORBIDDEN_NODE_FIELDS}
            for node in cleaned["nodes"]
        ]

    # Ensure settings exists
    if "settings" not in cleaned:
        cleaned["settings"] = {"executionOrder": "v1"}

    return cleaned
```

---

## Related Documentation

- [KNOWN_LIMITATIONS.md](KNOWN_LIMITATIONS.md) - API limitations and workarounds
- [N8N_MCP_ISSUES.md](N8N_MCP_ISSUES.md) - Detailed issue analysis
- [CONNECTION_TYPES.md](CONNECTION_TYPES.md) - Connection structure guide
- [CREDENTIAL_TYPES.md](CREDENTIAL_TYPES.md) - Credential type reference
- [n8n API Documentation](https://docs.n8n.io/api/) - Official n8n API docs

---

## Testing Your Workflow Data

Before creating a workflow, validate your data structure:

```python
# Use the validate_workflow tool (when implemented)
validation_result = validate_workflow(workflow_json)

if not validation_result["valid"]:
    print("Validation errors:")
    for error in validation_result["errors"]:
        print(f"  - {error}")

    print("\nWarnings:")
    for warning in validation_result["warnings"]:
        print(f"  - {warning}")
else:
    print("Workflow structure is valid!")
    # Proceed with creation
    create_workflow(workflow_json)
```

This catches issues before making API calls, saving time and debugging effort.
